{
	"name": "CombatLogic",
	"events": [
		{
			"eventType": "comment",
			"text": "MATCH LOGIC",
			"background-color": [
				0.9568627450980393,
				0.5568627450980392,
				0.984313725490196,
				1
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 414281986852427,
					"parameters": {
						"variable": "TapIndex",
						"comparison": 0,
						"value": "3"
					}
				},
				{
					"id": "compare-two-values",
					"objectClass": "System",
					"sid": 921057663903750,
					"parameters": {
						"first-value": "TurnPhase",
						"comparison": 0,
						"second-value": "0"
					}
				},
				{
					"id": "compare-two-values",
					"objectClass": "System",
					"sid": 634930346752516,
					"parameters": {
						"first-value": "IsPlayerBusy",
						"comparison": 0,
						"second-value": "0"
					}
				}
			],
			"actions": [],
			"sid": 839269246935376,
			"children": [
				{
					"eventType": "variable",
					"name": "Damage",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 155267598925596
				},
				{
					"eventType": "variable",
					"name": "MatchedColor",
					"type": "number",
					"initialValue": "-1",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 109894856348029
				},
				{
					"eventType": "variable",
					"name": "DamageDealt",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 858191346936888
				},
				{
					"eventType": "variable",
					"name": "healAmount",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 252621766237537
				},
				{
					"eventType": "variable",
					"name": "mismatch",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 752938105153099
				},
				{
					"eventType": "variable",
					"name": "selectedCount",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 847335109648957
				},
				{
					"eventType": "variable",
					"name": "actorUID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 408058138323354
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 819741339016466,
							"parameters": {
								"object": "Gem",
								"expression": "Gem.Selected",
								"comparison": 0,
								"value": "1"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 274559604640217,
							"parameters": {
								"variable": "selectedCount",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 954679944601426,
							"parameters": {
								"variable": "mismatch",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 399588498282072,
							"parameters": {
								"variable": "MatchedColor",
								"value": "Gem.elementIndex"
							}
						}
					],
					"sid": 815678906726635,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 811266439535813,
									"parameters": {
										"object": "Gem"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Gem",
									"sid": 437896570191552,
									"parameters": {
										"instance-variable": "Selected",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 295813921761915,
									"parameters": {
										"variable": "selectedCount",
										"value": "1"
									}
								}
							],
							"sid": 869809074056059,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 773113188075687,
											"parameters": {
												"first-value": "Gem.elementIndex",
												"comparison": 1,
												"second-value": "MatchedColor"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 593588950672438,
											"parameters": {
												"variable": "mismatch",
												"value": "1"
											}
										}
									],
									"sid": 279555913802322
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 437321642587426,
									"parameters": {
										"first-value": "selectedCount",
										"comparison": 0,
										"second-value": "3"
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 381677415877405,
									"parameters": {
										"first-value": "mismatch",
										"comparison": 0,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 958506921771108,
									"parameters": {
										"variable": "matched",
										"value": "1"
									}
								},
								{
									"id": "set-text",
									"objectClass": "matchedText",
									"sid": 184505754061176,
									"parameters": {
										"text": "matched"
									}
								}
							],
							"sid": 350151072102987,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 816937253672753,
											"parameters": {
												"first-value": "MatchedColor",
												"comparison": 0,
												"second-value": "0"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 286340132657707,
											"parameters": {
												"object": "Gem",
												"expression": "Gem.Selected",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 445529212761314,
											"parameters": {
												"variable": "MatchedColorValue",
												"value": "MatchedColor"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 283484693548764,
											"parameters": {
												"variable": "TurnPhase",
												"value": "1"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 806577665442476,
											"parameters": {
												"variable": "SuppressChainUI",
												"value": "false"
											}
										},
										{
											"callFunction": "UpdateChain",
											"sid": 100050500694119,
											"parameters": [
												"MatchedColor"
											]
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 727545623973592,
											"parameters": {
												"variable": "IsAOEMatch",
												"value": "0"
											}
										},
										{
											"callFunction": "ResolveGemAction",
											"sid": 279990975752522,
											"parameters": [
												"0",
												"Functions.GetCurrentTurn"
											]
										},
										{
											"callFunction": "DestroyGem",
											"sid": 189377760358346
										},
										{
											"callFunction": "ClearMatchState",
											"sid": 366154527655540
										},
										{
											"callFunction": "Sub_Energy",
											"sid": 612471673192503
										}
									],
									"sid": 903569640253991,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 645468962214008,
													"parameters": {
														"first-value": "ChainNumber",
														"comparison": 5,
														"second-value": "2"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 788850580404921,
													"parameters": {
														"variable": "ApplyChainToNextDamage",
														"value": "1"
													}
												}
											],
											"sid": 590506706127100
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 400796481946622
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 959704954014642,
													"parameters": {
														"variable": "ApplyChainToNextDamage",
														"value": "0"
													}
												}
											],
											"sid": 346176613887261
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 782762597089290,
											"parameters": {
												"first-value": "MatchedColor",
												"comparison": 0,
												"second-value": "1"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 190355760929033,
											"parameters": {
												"object": "Gem",
												"expression": "Gem.Selected",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 947330964424074,
											"parameters": {
												"variable": "MatchedColorValue",
												"value": "MatchedColor"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 329122270836141,
											"parameters": {
												"variable": "TurnPhase",
												"value": "1"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 657069061832512,
											"parameters": {
												"variable": "SuppressChainUI",
												"value": "false"
											}
										},
										{
											"callFunction": "UpdateChain",
											"sid": 199628903957262,
											"parameters": [
												"MatchedColor"
											]
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 966239706684838,
											"parameters": {
												"variable": "IsAOEMatch",
												"value": "0"
											}
										},
										{
											"callFunction": "ResolveGemAction",
											"sid": 786202945033346,
											"parameters": [
												"1",
												"Functions.GetCurrentTurn"
											]
										},
										{
											"callFunction": "DestroyGem",
											"sid": 754019083409251
										},
										{
											"callFunction": "ClearMatchState",
											"sid": 188019071539824
										},
										{
											"callFunction": "Sub_Energy",
											"sid": 382690226756430
										}
									],
									"sid": 235050773518154,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 202594845367570,
													"parameters": {
														"first-value": "ChainNumber",
														"comparison": 5,
														"second-value": "2"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 282093945955171,
													"parameters": {
														"variable": "ApplyChainToNextDamage",
														"value": "1"
													}
												}
											],
											"sid": 399738704845569
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 754299139664612
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 728560367295791,
													"parameters": {
														"variable": "ApplyChainToNextDamage",
														"value": "0"
													}
												}
											],
											"sid": 675788088598376
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 758773329780111,
											"parameters": {
												"first-value": "MatchedColor",
												"comparison": 0,
												"second-value": "2"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 553768557955074,
											"parameters": {
												"object": "Gem",
												"expression": "Gem.Selected",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 236675251866069,
											"parameters": {
												"variable": "MatchedColorValue",
												"value": "0"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 539823456236463,
											"parameters": {
												"variable": "IsAOEMatch",
												"value": "0"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 172046583225302,
											"parameters": {
												"variable": "SuppressChainUI",
												"value": "false"
											}
										},
										{
											"callFunction": "UpdateChain",
											"sid": 603917683865731,
											"parameters": [
												"2"
											]
										}
									],
									"sid": 625510003724148,
									"children": [
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"callFunction": "ResolveGemAction",
													"sid": 892846293243513,
													"parameters": [
														"MatchedColor",
														"Functions.GetCurrentTurn"
													]
												}
											],
											"sid": 264364575258703
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"callFunction": "DestroyGem",
													"sid": 698259348077046
												},
												{
													"callFunction": "ClearMatchState",
													"sid": 942180023744064
												},
												{
													"callFunction": "Sub_Energy",
													"sid": 273190598426717
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 558326802190603,
													"parameters": {
														"variable": "ApplyChainToNextDamage",
														"value": "0"
													}
												}
											],
											"sid": 261455915518231
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 600917490629225,
											"parameters": {
												"first-value": "MatchedColor",
												"comparison": 0,
												"second-value": "3"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 106923135501335,
											"parameters": {
												"object": "Gem",
												"expression": "Gem.Selected",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"callFunction": "Add_Gold",
											"sid": 554105668786529,
											"parameters": [
												"random(1,45)"
											]
										},
										{
											"callFunction": "DestroyGem",
											"sid": 693302234630220
										},
										{
											"callFunction": "ClearMatchState",
											"sid": 266025797968937
										},
										{
											"callFunction": "AdvanceTurn",
											"sid": 418106879911094
										},
										{
											"callFunction": "ProcessTurn",
											"sid": 596258785847587
										}
									],
									"sid": 886844095068102
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 981071614999934,
											"parameters": {
												"first-value": "MatchedColor",
												"comparison": 0,
												"second-value": "4"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 605608975129816,
											"parameters": {
												"object": "Gem",
												"expression": "Gem.Selected",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 755762495437249,
											"parameters": {
												"variable": "MatchedColorValue",
												"value": "4"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 581874383339613,
											"parameters": {
												"variable": "IsAOEMatch",
												"value": "0"
											}
										},
										{
											"callFunction": "UpdateChain",
											"sid": 182344556656441,
											"parameters": [
												"4"
											]
										}
									],
									"sid": 786406126708126,
									"children": [
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"callFunction": "DestroyGem",
													"sid": 281219307480744
												},
												{
													"callFunction": "ClearMatchState",
													"sid": 329106179049620
												},
												{
													"callFunction": "Sub_Energy",
													"sid": 653618768950399
												},
												{
													"callFunction": "ResolveGemAction",
													"sid": 977950700003744,
													"parameters": [
														"4",
														"Functions.GetCurrentTurn"
													]
												}
											],
											"sid": 784054526682306
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 383526968852668,
											"parameters": {
												"first-value": "MatchedColor",
												"comparison": 0,
												"second-value": "5"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 879288016024431,
											"parameters": {
												"object": "Gem",
												"expression": "Gem.Selected",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"callFunction": "DestroyGem",
											"sid": 159191475652364
										},
										{
											"callFunction": "ClearMatchState",
											"sid": 309674470239904
										},
										{
											"callFunction": "Add_Energy",
											"sid": 539546893140720,
											"parameters": [
												"actorUID"
											]
										},
										{
											"callFunction": "AdvanceTurn",
											"sid": 568318563864215
										},
										{
											"callFunction": "ProcessTurn",
											"sid": 218577005289379
										}
									],
									"sid": 351901778321805
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 707433302378715
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 596520683340420,
									"parameters": {
										"object": "Gem",
										"expression": "Gem.Selected",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "Gem",
									"sid": 122275493419211,
									"parameters": {
										"opacity": "100"
									}
								},
								{
									"id": "flash",
									"objectClass": "Gem",
									"sid": 375684239728735,
									"behaviorType": "Flash",
									"parameters": {
										"on-time": "0.08",
										"off-time": "0.08",
										"duration": "0.8"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 858410844538750,
									"parameters": {
										"seconds": "0.3",
										"use-timescale": true
									}
								},
								{
									"callFunction": "ClearMatchState",
									"sid": 374999689887953
								}
							],
							"sid": 323023192682146
						}
					]
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-object-clicked",
					"objectClass": "Mouse",
					"sid": 472461935965244,
					"parameters": {
						"mouse-button": "left",
						"click-type": "clicked",
						"object-clicked": "Gem"
					}
				}
			],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 849081258746390,
					"parameters": {
						"variable": "TurnPhase",
						"value": "0"
					}
				}
			],
			"sid": 325761618746408
		}
	],
	"sid": 655526999015336
}